FROM ubuntu:20.04

RUN apt-get update
RUN apt-get upgrade
RUN DEBIAN_FRONTEND=noninteractive TZ=Etc/UTC apt-get install -yq \
apt-file \
astyle \
autoconf \
bash \
bc \
binfmt-support \
bison \
build-essential \
ccache \
chrpath \
clang \
cmake \
cpio \
cppcheck \
curl \
debianutils \
diffstat \
dnsmasq \
dnsutils \
docker \
docker-compose \
docker-doc \
docker-registry \
docker.io \
doxygen \
ethtool \
file \
flex \
gawk \
gcc \
gdb \
git \
git-core \
glances \
gnome-tweaks \
graphviz \
gzip \
htop \
inetutils-tools \
inetutils-traceroute \
iperf3 \
iproute2 \
iputils-ping \
iwyu \
kpartx \
libc-ares-dev \
libc6-dev \
libcurl4-openssl-dev \
libegl1-mesa \
libelf-dev \
libev-dev \
libevent-dev \
liblz4-tool \
libncurses5-dev \
libpango1.0-0 \
libperl-dev \
libsdl1.2-dev \
libssl-dev \
libtool \
libu2f-udev \
locales \
locate \
lshw \
lzop \
make \
meld \
minicom \
mtd-utils \
net-tools \
node-grunt-cli \
nodejs \
npm \
ntpdate \
nvme-cli \
openvpn \
p7zip-full \
par2 \
pip \
procps \
putty \
python3 \
python3-dev \
python3-git \
python3-gpg \
python3-jinja2 \
python3-pexpect \
python3-pip \
python3-subunit \
python3-tk \
python3-virtualenv \
qemu-system-arm \
qemu-user-static \
quilt \
rsync \
ripgrep \
ruby \
scons \
screen \
secure-delete \
socat \
sudo \
sysstat \
tcpdump \
texinfo \
tmux \
tmux-plugin-manager \
unzip \
vim \
vim-gtk3 \
wget \
xsltproc \
xterm \
xz-utils \
zlib1g \
zlib1g-dev \
&& apt-get clean

RUN sudo locale-gen en_US.UTF-8
RUN groupadd -g 1000 user
RUN useradd -m -u 1000 -g 1000 user
RUN echo "user ALL=(ALL) NOPASSWD: ALL" > /etc/sudoers.d/usersudo
RUN chmod 400 /etc/sudoers.d/usersudo
USER user

CMD ["/bin/bash"]
